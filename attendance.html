<!DOCTYPE html>
<html lang="ar">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>الحضور والانصراف</title>

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">

    <style>
        body {
            background: #f4f4f4;
            direction: rtl;
            text-align: right;
        }

        nav h3 {
            color: white;
        }
    </style>
</head>

<body>

    <!-- Navbar -->
    <nav class="navbar navbar-dark bg-primary p-3">
        <h3>الحضور والانصراف</h3>
        <a href="index.html" class="btn btn-light">الرجوع للرئيسية</a>
    </nav>

    <div class="container mt-4">

        <!-- زر إضافة حضور -->
        <button class="btn btn-success mb-3" data-bs-toggle="modal" data-bs-target="#addAttendanceModal">
            + تسجيل حضور
        </button>

        <!-- جدول الحضور -->
        <table class="table table-bordered bg-white">
            <thead class="table-dark">
                <tr>
                    <th>الرقم</th>
                    <th>اسم الموظف</th>
                    <th>التاريخ</th>
                    <th>الوقت</th>
                    <th>تحكم</th>
                </tr>
            </thead>
            <tbody id="attendanceTable">
                <!-- البيانات تظهر هنا -->
            </tbody>
        </table>
    </div>

    <!-- Modal تسجيل حضور -->
    <div class="modal fade" id="addAttendanceModal">
        <div class="modal-dialog">
            <div class="modal-content">

                <div class="modal-header">
                    <h5 class="modal-title">تسجيل حضور جديد</h5>
                    <button class="btn-close" data-bs-dismiss="modal"></button>
                </div>

                <div class="modal-body">
                    <form id="attendanceForm">

                        <label>اسم الموظف:</label>
                        <input type="text" id="attName" class="form-control mb-2" required>

                        <label>التاريخ:</label>
                        <input type="date" id="attDate" class="form-control mb-2" required>

                        <label>الوقت:</label>
                        <input type="time" id="attTime" class="form-control mb-2" required>

                        <button type="submit" class="btn btn-primary w-100">حفظ</button>

                    </form>
                </div>

            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <script>
        let attendance = [];
        let attId = 1;

        // إضافة سجل حضور
        document.getElementById("attendanceForm").addEventListener("submit", function (e) {
            e.preventDefault();

            let name = document.getElementById("attName").value;
            let date = document.getElementById("attDate").value;
            let time = document.getElementById("attTime").value;

            attendance.push({
                id: attId,
                name: name,
                date: date,
                time: time
            });

            attId++;
            displayAttendance();
            e.target.reset();
        });

        // عرض الحضور في الجدول
        function displayAttendance() {
            let table = document.getElementById("attendanceTable");
            table.innerHTML = "";

            attendance.forEach(a => {
                table.innerHTML += `
                    <tr>
                        <td>${a.id}</td>
                        <td>${a.name}</td>
                        <td>${a.date}</td>
                        <td>${a.time}</td>
                        <td>
                            <button class="btn btn-danger btn-sm" onclick="deleteAtt(${a.id})">حذف</button>
                        </td>
                    </tr>
                `;
            });
        }

        // حذف سجل حضور
        function deleteAtt(id) {
            attendance = attendance.filter(a => a.id !== id);
            displayAttendance();
        }
    </script>

</body>

</html>